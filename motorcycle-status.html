<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="motorcycle_status_page">وضعیت موتورسیکل - سیستم مدیریت موتورسیکل</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="./global.css" />
    <script src="./translations.js"></script>
  </head>
  <body class="h-screen">
<div id="loading-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.65); z-index: 9999; justify-content: center; align-items: center; flex-direction: column; color: white; font-size: 1rem;">
  
  <div class="motorbike-loader">
    <div class="bike"><a href="https://ibb.co/kgFcnCHj">
  <img class="small-img" src="https://i.ibb.co/kgFcnCHj/emojis-com-a-motor-bike-rideng-emoji.png" alt="emojis-com-a-motor-bike-rideng-emoji">
</a>
</div>
    <div class="smoke smoke1">💨</div>
    <div class="smoke smoke2">🌫️</div>
  </div>
  
  <p style="margin: 10px 0 0; font-weight: bold; text-shadow: 0 0 10px rgba(255,255,255,0.5);" data-i18n="loading">
    در حال بارگذاری...
  </p>
</div>
    <div class="h-screen p-6">
      <!-- Header -->
      <div class="card p-6 mb-6" id="header-section">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-4">
            <div class="motorcycle-icon">
              🏍️
            </div>
            <div>
              <h1 id="dashboard-title" class="text-3xl font-bold text-white" data-i18n="dashboard_title">
                سیستم مدیریت موتورسیکل
              </h1>
              <p id="company-name" class="text-gray-300 mt-1" data-i18n="company_name">پارکینگ هرات</p>
            </div>
          </div>
          <div class="text-left">
            <p class="text-sm text-gray-300" data-i18n="date">تاریخ</p>
            <p id="current-date" class="text-lg font-bold text-white"></p>
          </div>
        </div>
      </div>
      <!-- Motorcycle Status Page Content -->
      <div id="motorcycle-status-page">
        <div class="card p-6">
          <div class="flex items-center justify-between mb-6">
            <button class="btn btn-secondary" onclick="navigateTo('./request-menu.html')">
              ← <span data-i18n="back_to_requests">بازگشت به درخواستی</span>
            </button>
            <h2 class="text-2xl font-bold text-white" data-i18n="all_motorcycle_status">
              وضعیت تمام موتورسیکل‌ها
            </h2>
          </div>
          <!-- Status Summary Cards -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <div class="stat-card bg-gradient-to-br from-green-500/20 to-emerald-600/20 border-green-400/30 cursor-pointer hover:scale-105 transition-all duration-300" onclick="filterMotorcycleStatus('available')">
              <div class="flex items-center justify-between mb-2">
                <span class="text-sm opacity-90" data-i18n="available_in_parking">موجود در پارکینگ</span>
                <span class="text-2xl">🅿️</span>
              </div>
              <p id="available-count" class="text-3xl font-bold">0</p>
            </div>
            <div class="stat-card bg-gradient-to-br from-yellow-500/20 to-orange-600/20 border-yellow-400/30 cursor-pointer hover:scale-105 transition-all duration-300" onclick="filterMotorcycleStatus('pending')">
              <div class="flex items-center justify-between mb-2">
                <span class="text-sm opacity-90" data-i18n="waiting_for_exit">در انتظار خروج</span>
                <span class="text-2xl">⏳</span>
              </div>
              <p id="pending-count" class="text-3xl font-bold">0</p>
            </div>
            <div class="stat-card bg-gradient-to-br from-red-500/20 to-pink-600/20 border-red-400/30 cursor-pointer hover:scale-105 transition-all duration-300" onclick="filterMotorcycleStatus('in-use')">
              <div class="flex items-center justify-between mb-2">
                <span class="text-sm opacity-90" data-i18n="in_use">در حال استفاده</span>
                <span class="text-2xl">🔄</span>
              </div>
              <p id="in-use-count" class="text-3xl font-bold">0</p>
            </div>
          </div>
          <!-- Filter Controls -->
          <div class="card p-4 mb-6">
            <div class="flex items-center gap-4 flex-nowrap">
              <span class="text-white font-semibold whitespace-nowrap" data-i18n="filter_by_status">فیلتر بر اساس وضعیت:</span>
              <div class="flex gap-2">
                <button id="filter-all" class="btn btn-secondary text-sm py-2 px-4 active-filter" onclick="filterMotorcycleStatus('all')" data-i18n="all">همه</button>
                <button id="filter-available" class="btn btn-success text-sm py-2 px-4" onclick="filterMotorcycleStatus('available')" data-i18n="available">موجود</button>
                <button id="filter-pending" class="btn text-sm py-2 px-4" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white;" onclick="filterMotorcycleStatus('pending')" data-i18n="pending">در انتظار</button>
                <button id="filter-in-use" class="btn btn-danger text-sm py-2 px-4" onclick="filterMotorcycleStatus('in-use')" data-i18n="in_use">در حال استفاده</button>
              </div>
              <div class="flex-1 min-w-0">
                <input id="motorcycle-status-search" class="input-field w-full text-base font-semibold text-gray-700 rounded-lg py-3 px-4" data-i18n-placeholder="search_motorcycle_dept" placeholder="جستجو نام موتور یا دیپارتمنت..." type="text" />
                <button id="motorcycle-status-search-btn" class="btn btn-primary ml-2 px-4 py-2 hidden">🔍</button>
              </div>
              <div class="text-white text-sm whitespace-nowrap">
                <span id="filtered-count">0</span> <span data-i18n="motorcycles_displayed">موتورسیکل نمایش داده شده</span>
              </div>
            </div>
          </div>
          <div class="card p-4 mb-6">
            <div class="flex items-center gap-4 flex-wrap">
              <span class="text-white font-semibold whitespace-nowrap" data-i18n="filter_by_department">فیلتر بر اساس دیپارتمنت:</span>
              <div id="dept-filters" class="flex flex-wrap gap-2 mb-4 overflow-x-auto w-full px-2 justify-start items-center min-h-10 py-2"></div>
            </div>
          </div>
          <div id="motorcycle-status-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
        </div>
      </div>
    </div>
    <!-- Password Modal -->
    <div id="password-modal" class="modal">
      <div class="modal-content">
        <h2 class="text-2xl font-bold text-gray-200 mb-6">🔐 <span data-i18n="authentication">احراز هویت</span></h2>
        <div class="mb-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg">
          <p id="password-message" class="text-sm text-blue-800" data-i18n="enter_password">برای دسترسی به این بخش، رمز عبور را وارد کنید</p>
        </div>
        <form id="password-form" onsubmit="verifyPassword(event)">
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-semibold text-gray-200 mb-2" data-i18n="password">رمز عبور</label>
              <input type="password" id="password-input" class="input-field text-gray-800" data-i18n-placeholder="enter_your_password" placeholder="رمز عبور را وارد کنید" required />
            </div>
            <div class="flex gap-3 mt-6">
              <button type="submit" class="btn btn-success flex-1">✅ <span data-i18n="confirm">تأیید</span></button>
              <button type="button" class="btn btn-secondary flex-1" onclick="closeModal('password-modal')">❌ <span data-i18n="cancel">انصراف</span></button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <!-- New Request Modal -->
    <div id="new-request-modal" class="modal">
      <div class="modal-content">
        <h2 class="text-2xl font-bold text-gray-200 mb-6" data-i18n="new_request_title">درخواست جدید</h2>
        <form id="new-request-form" onsubmit="submitNewRequest(event)">
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-semibold text-gray-200 mb-2" data-i18n="select_department">انتخاب دیپارتمنت</label>
              <div class="relative">
                <button type="button" id="department-select" class="input-field text-right cursor-pointer flex items-center justify-between text-gray-800" onclick="toggleDepartmentDropdown()">
                  <span id="department-display" data-i18n="select_department">دیپارتمنت را انتخاب کنید</span>
                  <span>▼</span>
                </button>
                <div id="department-dropdown" class="absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-lg shadow-lg max-h-64 overflow-hidden z-10 hidden">
                  <div class="p-3 border-b border-gray-200">
                    <input type="text" id="department-search" class="w-full p-2 border border-gray-300 rounded-md text-sm" data-i18n-placeholder="search_departments" placeholder="🔍 جستجو در دیپارتمنت‌ها..." oninput="searchDepartments()" />
                  </div>
                  <div id="department-options" class="max-h-48 overflow-y-auto"></div>
                </div>
                <input type="hidden" id="selected-department" required />
              </div>
            </div>
            <div>
              <label class="block text-sm font-semibold text-gray-200 mb-2" data-i18n="select_employee">انتخاب کارمند</label>
              <div class="relative">
                <button type="button" id="employee-select" class="input-field text-right cursor-pointer flex items-center justify-between opacity-50 text-gray-800" onclick="toggleEmployeeDropdown()" disabled>
                  <span id="employee-display" data-i18n="first_select_department">ابتدا دیپارتمنت را انتخاب کنید</span>
                  <span>▼</span>
                </button>
                <div id="employee-dropdown" class="absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-lg shadow-lg max-h-64 overflow-hidden z-10 hidden">
                  <div class="p-3 border-b border-gray-200">
                    <input type="text" id="employee-search" class="w-full p-2 border border-gray-300 rounded-md text-sm" data-i18n-placeholder="search_employees" placeholder="🔍 جستجو در کارمندان..." oninput="searchEmployees()" />
                  </div>
                  <div id="employee-options" class="max-h-48 overflow-y-auto"></div>
                </div>
                <input type="hidden" id="selected-employee" required />
              </div>
            </div>
            <div>
              <label class="block text-sm font-semibold text-gray-200 mb-2" data-i18n="select_motorcycle">انتخاب موتورسیکل</label>
              <div class="relative">
                <button type="button" id="motorcycle-select" class="input-field text-right cursor-pointer flex items-center justify-between opacity-50 text-gray-800" onclick="toggleMotorcycleDropdown()" disabled>
                  <span id="motorcycle-display" data-i18n="first_select_department">ابتدا دیپارتمنت را انتخاب کنید</span>
                  <span>▼</span>
                </button>
                <div id="motorcycle-dropdown" class="absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-lg shadow-lg max-h-64 overflow-hidden z-10 hidden">
                  <div class="p-3 border-b border-gray-200">
                    <input type="text" id="motorcycle-search" class="w-full p-2 border border-gray-300 rounded-md text-sm" data-i18n-placeholder="search_motorcycles" placeholder="🔍 جستجو در موتورسیکل‌ها..." oninput="searchMotorcycles()" />
                  </div>
                  <div id="motorcycle-options" class="max-h-48 overflow-y-auto"></div>
                </div>
                <input type="hidden" id="selected-motorcycle" required />
              </div>
            </div>
            <div class="flex gap-3 mt-6">
              <button type="submit" class="btn btn-success flex-1">✅ <span data-i18n="register_request">ثبت درخواست</span></button>
              <button type="button" class="btn btn-secondary flex-1" onclick="closeModal('new-request-modal')">❌ <span data-i18n="cancel">انصراف</span></button>
            </div>
          </div>
        </form>
      </div>
    </div>
   
    <div id="new-motorcycle-modal" class="modal">
      <div class="modal-content">
        <h2 class="text-2xl font-bold text-gray-200 mb-6" data-i18n="add_motorcycle">افزودن موتورسیکل جدید</h2>
        <form id="new-motorcycle-form" onsubmit="submitNewMotorcycle(event)">
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2" data-i18n="motorcycle_name">نام موتورسیکل</label>
              <input type="text" id="motorcycle-name" class="input-field" data-i18n-placeholder="example_name" placeholder="مثال: لمر" required />
            </div>
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2" data-i18n="color">رنگ</label>
              <input type="text" id="motorcycle-color" class="input-field" data-i18n-placeholder="example_color" placeholder="مثال: آبی" required />
            </div>
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2" data-i18n="plate">پلاک</label>
              <input type="text" id="motorcycle-plate" class="input-field" data-i18n-placeholder="example_plate" placeholder="مثال: TS_01" required />
            </div>
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2" data-i18n="department">دیپارتمنت</label>
              <input type="text" id="motorcycle-department" class="input-field" data-i18n-placeholder="example_department" placeholder="مثال: پاور" required />
            </div>
            <div class="flex gap-3 mt-6">
              <button type="submit" class="btn btn-success flex-1">✅ <span data-i18n="save">ذخیره</span></button>
              <button type="button" class="btn btn-secondary flex-1" onclick="closeModal('new-motorcycle-modal')">❌ <span data-i18n="cancel">انصراف</span></button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <!-- New Employee Modal -->
    <div id="new-employee-modal" class="modal">
      <div class="modal-content">
        <h2 class="text-2xl font-bold text-gray-200 mb-6" data-i18n="add_employee">افزودن کارمند جدید</h2>
        <form id="new-employee-form" onsubmit="submitNewEmployee(event)">
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2" data-i18n="employee_name">نام و نام خانوادگی</label>
              <input type="text" id="employee-name" class="input-field" data-i18n-placeholder="example_employee_name" placeholder="مثال: شهاب حمیدی" required />
            </div>
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2" data-i18n="employee_id">آیدی</label>
              <input type="text" id="employee-id" class="input-field" placeholder="مثال: 1806" required />
            </div>
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2" data-i18n="department">دیپارتمنت</label>
              <input type="text" id="employee-department" class="input-field" data-i18n-placeholder="example_department" placeholder="مثال: پاور" required />
            </div>
            <div>
              <label class="block text-sm font-semibold text-gray-700 mb-2" data-i18n="employee_fingerprint">شناسه اثر انگشت</label>
              <input type="text" id="employee-fingerprint" class="input-field" data-i18n-placeholder="example_fingerprint" placeholder="مثال: SH001" required />
            </div>
            <div class="flex gap-3 mt-6">
              <button type="submit" class="btn btn-success flex-1">✅ <span data-i18n="save">ذخیره</span></button>
              <button type="button" class="btn btn-secondary flex-1" onclick="closeModal('new-employee-modal')">❌ <span data-i18n="cancel">انصراف</span></button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <!-- Toast Notification -->
    <div id="toast" class="toast">
      <span id="toast-icon">✅</span> <span id="toast-message"></span>
    </div>
    <script src="./googleSheets.js"></script>
    <script src="./index.js"></script>
  </body>
</html>